CREATE TABLE TAREFA (
  TarCodigo INT PRIMARY KEY IDENTITY NOT NULL,
  TarNome VARCHAR(50) NOT NULL,
  TarDescricao VARCHAR(300) NOT NULL,
  TarStatus BIT NOT NULL,
  TarDataInicio DATETIME NOT NULL,
  TarDataFinal DATETIME NULL,
);

CREATE TABLE TIPO_PROJETO (
  TpPCodigo INT PRIMARY KEY IDENTITY NOT NULL,
  TpPDescricao VARCHAR(100) NOT NULL,
);

CREATE TABLE ENDERECO (
  EndCodigo INT PRIMARY KEY IDENTITY NOT NULL,
  EndCEP VARCHAR(9) NOT NULL,
  EndPais CHAR(2) NOT NULL,
  EndUF CHAR(2) NOT NULL,
  EndCidade VARCHAR(50) NOT NULL,
  EndBairro VARCHAR(50) NOT NULL,
  EndLogradouro VARCHAR(50) NOT NULL,
  EndNumero INT NOT NULL,
  EndComplemento VARCHAR(50) NULL,
);

CREATE TABLE EQUIPE (
  EqpCodigo INT PRIMARY KEY IDENTITY NOT NULL,
  EqpNome VARCHAR(50) NOT NULL,
  EqpStatus BIT NOT NULL,
  EqpDataInicio DATETIME NOT NULL,
  EqpDataFinal DATETIME NULL,
);

CREATE TABLE MEMBROS (
  MemCodigo INT PRIMARY KEY IDENTITY NOT NULL,
  EndCodigo INT NOT NULL,
  MemNome VARCHAR(50) NOT NULL,
  MemSexo CHAR(1) NOT NULL,
  MemCPF VARCHAR(14) NOT NULL,
  MemEmail VARCHAR(30) NOT NULL,
  MemTelefone VARCHAR(14) NULL,
  MemDataNascimento DATETIME NOT NULL,
  INDEX MEMBROS_FKIndex1(EndCodigo),
  FOREIGN KEY(EndCodigo)
    REFERENCES ENDERECO(EndCodigo)
      ON DELETE CASCADE
      ON UPDATE CASCADE
);

CREATE TABLE MEMBRO_EQUIPE (
  MeqCodigoMembro INT NOT NULL,
  MeqCodigoEquipe INT NOT NULL,
  MeqFuncao VARCHAR(50) NOT NULL,
  MeqDataRegistro DATETIME NOT NULL,
  PRIMARY KEY (MeqCodigoMembro, MeqCodigoEquipe),
  FOREIGN KEY(MeqCodigoEquipe)
    REFERENCES EQUIPE(EqpCodigo)
      ON DELETE CASCADE
      ON UPDATE CASCADE,
  FOREIGN KEY(MeqCodigoMembro)
    REFERENCES MEMBROS(MemCodigo)
      ON DELETE CASCADE
      ON UPDATE CASCADE
);

CREATE TABLE PROJETO (
  ProjCodigo INT PRIMARY KEY IDENTITY NOT NULL,
  TpPCodigo INT NOT NULL,
  TarCodigo INT NOT NULL,
  EqpCodigo INT NOT NULL,
  ProjNome VARCHAR(50) NOT NULL,
  ProStatus BIT NOT NULL,
  ProDataInicio DATETIME NOT NULL,
  ProDataFinal DATETIME NULL,
  INDEX PROJETO_FKIndex1(TpPCodigo),
  INDEX PROJETO_FKIndex2(TarCodigo),
  INDEX PROJETO_FKIndex3(EqpCodigo),
  FOREIGN KEY(TpPCodigo)
    REFERENCES TIPO_PROJETO(TpPCodigo)
      ON DELETE CASCADE
      ON UPDATE CASCADE,
  FOREIGN KEY(TarCodigo)
    REFERENCES TAREFA(TarCodigo)
      ON DELETE CASCADE
      ON UPDATE CASCADE,
  FOREIGN KEY(EqpCodigo)
    REFERENCES EQUIPE(EqpCodigo)
      ON DELETE CASCADE
      ON UPDATE CASCADE
);